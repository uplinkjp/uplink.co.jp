"use strict";var UPLINK={};UPLINK={init:function(){$(function(){UPLINK.bind()})},bind:function(){$(window).on("load",function(){UPLINK.onload(),$(this).on("scroll",function(){UPLINK.onscroll()}).on("resize",function(){UPLINK.onresize()})}),UPLINK.sticky.init();var e=null;$(document).on("click",'a[href^="#"]',function(){e&&clearTimeout(e);var a=$(this).attr("href"),n=$("#"==a||""===a?"html":a);return UPLINK.header.closeMainNav(),UPLINK.header.closeSubNav(),e=setTimeout(function(){var e=n.offset().top;console.log(e),$("html,body").animate({scrollTop:e},300,$.bez([.8,0,.3,1]))},300),!1})},onload:function(){UPLINK.slick.init(),UPLINK.header.init()},onscroll:function(){var e=$(window).scrollTop();UPLINK.header.scroll(e)},onresize:function(){var e=$(window).width();UPLINK.header.resize(e),UPLINK.sticky.resize(e)}},UPLINK.init(),UPLINK.getDisplayType={get:function(e){var a=null;return e<=767?a="sp":768<=e&&e<=1024?a="tb":1025<e&&(a="pc"),a}},UPLINK.header={$el:null,$main:null,$sub:null,$mainClone:null,$subClone:null,sl_mainNavTrigger:null,sl_subNavTrigger:null,main_height:null,sub_height:null,_st:0,isScroll:!1,isFrontPage:!1,is2ndPage:!1,is3rdPage:!1,isPC:!1,isTB:!1,isSP:!1,defMainOpen:!1,defSubOpen:!1,isMainNavOpen:!1,isSubNavOpen:!1,init:function(){UPLINK.header.$el=$(".js-headerWrap"),UPLINK.header.$main=$(".l-nav"),UPLINK.header.$sub=$(".l-header_sub"),UPLINK.header.sl_mainNavTrigger=".js-mainNavTrigger",UPLINK.header.sl_subNavTrigger=".js-subNavTrigger",UPLINK.header.isFrontPage=!!$(".type-frontpage").length,UPLINK.header.is2ndPage=!!$(".type-2nd").length,UPLINK.header.is3rdPage=!!$(".type-3rd").length,UPLINK.header.$mainClone=UPLINK.header.$main.clone(),UPLINK.header.$mainClone.addClass("is-clone"),$("body").append(UPLINK.header.$mainClone),$(".l-nav.is-clone").wrap('<div class="js-main-clone"></div>'),UPLINK.header.$subClone=UPLINK.header.$sub.clone(),UPLINK.header.$subClone.addClass("is-clone"),$("body").append(UPLINK.header.$subClone),$(".l-header_sub.is-clone").wrap('<div class="js-sub-clone"></div>'),UPLINK.header.resize($(window).width()),UPLINK.header.scroll(0),UPLINK.header.bind()},bind:function(){$(document).on("click",UPLINK.header.sl_mainNavTrigger,function(){return UPLINK.header.isMainNavOpen?UPLINK.header.closeMainNav():UPLINK.header.openMainNav(),!1}).on("click",UPLINK.header.sl_subNavTrigger,function(){return UPLINK.header.isSubNavOpen?UPLINK.header.closeSubNav():UPLINK.header.openSubNav(),!1})},setSize:function(e){UPLINK.header.isPC=!1,UPLINK.header.isTB=!1,UPLINK.header.isSP=!1;var a=UPLINK.getDisplayType.get(e);"sp"==a&&(UPLINK.header.isSP=!0),"tb"==a&&(UPLINK.header.isTB=!0),"pc"==a&&(UPLINK.header.isPC=!0)},setDefault:function(){UPLINK.header.defMainOpen=!1,UPLINK.header.defSubOpen=!1,UPLINK.header.isFrontPage?UPLINK.header.defMainOpen=!0:UPLINK.header.is2ndPage?UPLINK.header.isTB?UPLINK.header.defSubOpen=!0:UPLINK.header.isPC&&(UPLINK.header.defMainOpen=!0,UPLINK.header.defSubOpen=!0):UPLINK.header.is3rdPage&&UPLINK.header.isPC&&(UPLINK.header.defMainOpen=!0)},doInit:function(){console.log("doinit"),UPLINK.header.isFrontPage&&console.log("　isFrontPage"),UPLINK.header.is2ndPage&&console.log("　is2ndPage"),UPLINK.header.is3rdPage&&console.log("　is3rdPage"),UPLINK.header.isPC&&console.log("　isPC"),UPLINK.header.isTB&&console.log("　isTB"),UPLINK.header.isSP&&console.log("　isSP"),UPLINK.header.defMainOpen&&console.log("　defMainOpen"),UPLINK.header.defSubOpen&&console.log("　defSubOpen"),console.log("- - - - - - - - - -"),UPLINK.header.defMainOpen?UPLINK.header.openMainNav():UPLINK.header.closeMainNav(),UPLINK.header.defSubOpen?UPLINK.header.openSubNav():UPLINK.header.closeSubNav()},resize:function(e){UPLINK.header.main_height=UPLINK.header.$mainClone.outerHeight(),UPLINK.header.sub_height=UPLINK.header.$subClone.height(),UPLINK.header.setSize(e),UPLINK.header.setDefault(),UPLINK.header.scroll(UPLINK.header._st)},scroll:function(e){e>300?($("body").addClass("is-scroll"),UPLINK.header.isScroll=!0,UPLINK.header.isMainNavOpen&&UPLINK.header.closeMainNav(),UPLINK.header.isSubNavOpen&&UPLINK.header.closeSubNav(),e<UPLINK.header._st?$("body").addClass("is-navfixed"):$("body").removeClass("is-navfixed")):(UPLINK.header.isScroll=!1,$("body").removeClass("is-scroll").removeClass("is-navfixed"),UPLINK.header.doInit()),e>400?setTimeout(function(){$("body").addClass("is-subNavTriggerFix")},100):$("body").removeClass("is-subNavTriggerFix"),UPLINK.header._st=e},openMainNav:function(){UPLINK.header.isMainNavOpen=!0,$("body").addClass("main-open"),UPLINK.header.isScroll?UPLINK.header.shuffleFadein(".l-nav.is-clone"):UPLINK.header.$el.css({"margin-top":"0px"})},closeMainNav:function(){UPLINK.header.isMainNavOpen=!1,UPLINK.header.opacity0(".l-nav.is-clone"),$("body").removeClass("main-open"),UPLINK.header.isScroll||UPLINK.header.$el.css({"margin-top":-UPLINK.header.main_height+"px"})},openSubNav:function(){UPLINK.header.$sub.length&&(UPLINK.header.isSubNavOpen=!0,$("body").addClass("sub-open"),UPLINK.header.isScroll?(UPLINK.header.shuffleFadein(".is-clone .l-nav_sub"),$("body").addClass("is-navfixed")):UPLINK.header.$sub.css({height:UPLINK.header.sub_height+"px"}))},closeSubNav:function(){UPLINK.header.$sub.length&&(UPLINK.header.isSubNavOpen=!1,UPLINK.header.opacity0(".is-clone .l-nav_sub"),UPLINK.header.isScroll?$("body").removeClass("is-navfixed"):UPLINK.header.$sub.css({height:"100px"}),$("body").removeClass("sub-open"))},shuffleFadein:function(e){var a=function(){return Math.random()-.5},n=$(e).eq(0).find("a, .form-googlesearch-text, .form-googlesearch"),i=(n.length,new Array),s=0;n.each(function(){i[s]=500+30*s,s++}),i=i.sort(a),console.log(i);var r=0;n.each(function(){console.log(i[r]),n.eq(r).delay(i[r]).animate({opacity:1},30),r++})},opacity0:function(e){var a=$(e).eq(0).find("a, .form-googlesearch-text, .form-googlesearch");a.css({opacity:0})}},UPLINK.scrollBan={_currentPos:0,init:function(){},ban:function(e){UPLINK.scrollBan._currentPos=e,$("body").addClass("is-fixed"),$("body").css({top:"-"+e+"px"})},release:function(){$("body").removeClass("is-fixed"),$("html,body").scrollTop(UPLINK.scrollBan._currentPos)}},UPLINK.slick={init:function(){UPLINK.slick.bind(),$(".js-slick").slick({infinite:!0,dots:!0,slidesToShow:1,centerMode:!0,prevArrow:"",nextArrow:"",variableWidth:!0,autoplay:!0,autoplaySpeed:4e3})},bind:function(){}},UPLINK.sticky={type:null,init:function(){UPLINK.sticky.type=UPLINK.getDisplayType.get($(window).width()),$(".js-sticky").stick_in_parent(),"pc"===UPLINK.sticky.type?$(".list-calendar-header-inner").stick_in_parent():$(".list-calendar-header").stick_in_parent()},resize:function(e){var a=UPLINK.getDisplayType.get(e);UPLINK.sticky.type!==a&&($(".js-sticky").trigger("sticky_kit:detach"),"pc"===UPLINK.sticky.type?$(".list-calendar-header-inner").trigger("sticky_kit:detach"):$(".list-calendar-header").trigger("sticky_kit:detach"),UPLINK.sticky.type=a,$(".js-sticky").stick_in_parent(),"pc"===UPLINK.sticky.type?$(".list-calendar-header-inner").stick_in_parent():$(".list-calendar-header").stick_in_parent())}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJtb2R1bGVzL2dldERpc3BsYXlUeXBlLmpzIiwibW9kdWxlcy9oZWFkZXIuanMiLCJtb2R1bGVzL3Njcm9sbEJhbi5qcyIsIm1vZHVsZXMvc2xpY2suanMiLCJtb2R1bGVzL3N0aWNreS5qcyJdLCJuYW1lcyI6WyJVUExJTksiLCJpbml0IiwiJCIsImJpbmQiLCJ3aW5kb3ciLCJvbiIsIm9ubG9hZCIsInRoaXMiLCJvbnNjcm9sbCIsIm9ucmVzaXplIiwic3RpY2t5IiwidGltZXIiLCJkb2N1bWVudCIsImNsZWFyVGltZW91dCIsImhyZWYiLCJhdHRyIiwidGFyZ2V0IiwiaGVhZGVyIiwiY2xvc2VNYWluTmF2IiwiY2xvc2VTdWJOYXYiLCJzZXRUaW1lb3V0IiwicG9zaXRpb24iLCJvZmZzZXQiLCJ0b3AiLCJjb25zb2xlIiwibG9nIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImJleiIsInNsaWNrIiwic3QiLCJzY3JvbGwiLCJ3dyIsIndpZHRoIiwicmVzaXplIiwiZ2V0RGlzcGxheVR5cGUiLCJnZXQiLCJ0eXBlIiwiJGVsIiwiJG1haW4iLCIkc3ViIiwiJG1haW5DbG9uZSIsIiRzdWJDbG9uZSIsInNsX21haW5OYXZUcmlnZ2VyIiwic2xfc3ViTmF2VHJpZ2dlciIsIm1haW5faGVpZ2h0Iiwic3ViX2hlaWdodCIsIl9zdCIsImlzU2Nyb2xsIiwiaXNGcm9udFBhZ2UiLCJpczJuZFBhZ2UiLCJpczNyZFBhZ2UiLCJpc1BDIiwiaXNUQiIsImlzU1AiLCJkZWZNYWluT3BlbiIsImRlZlN1Yk9wZW4iLCJpc01haW5OYXZPcGVuIiwiaXNTdWJOYXZPcGVuIiwibGVuZ3RoIiwiY2xvbmUiLCJhZGRDbGFzcyIsImFwcGVuZCIsIndyYXAiLCJvcGVuTWFpbk5hdiIsIm9wZW5TdWJOYXYiLCJzZXRTaXplIiwic2V0RGVmYXVsdCIsImRvSW5pdCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJzaHVmZmxlRmFkZWluIiwiY3NzIiwibWFyZ2luLXRvcCIsIm9wYWNpdHkwIiwic2wiLCJzaHVmZmxlIiwiTWF0aCIsInJhbmRvbSIsImNvbnRlbnQiLCJlcSIsImZpbmQiLCJkZWxheSIsIkFycmF5IiwiaSIsImVhY2giLCJzb3J0IiwiaiIsIm9wYWNpdHkiLCJzY3JvbGxCYW4iLCJfY3VycmVudFBvcyIsImJhbiIsInJlbGVhc2UiLCJpbmZpbml0ZSIsImRvdHMiLCJzbGlkZXNUb1Nob3ciLCJjZW50ZXJNb2RlIiwicHJldkFycm93IiwibmV4dEFycm93IiwidmFyaWFibGVXaWR0aCIsImF1dG9wbGF5IiwiYXV0b3BsYXlTcGVlZCIsInN0aWNrX2luX3BhcmVudCIsIl90eXBlIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQSxJQUFBQSxVQUVBQSxTQUNBQyxLQUFBLFdBQ0FDLEVBQUEsV0FDQUYsT0FBQUcsVUFJQUEsS0FBQSxXQUNBRCxFQUFBRSxRQUNBQyxHQUFBLE9BQUEsV0FDQUwsT0FBQU0sU0FDQUosRUFBQUssTUFDQUYsR0FBQSxTQUFBLFdBQ0FMLE9BQUFRLGFBRUFILEdBQUEsU0FBQSxXQUNBTCxPQUFBUyxlQU1BVCxPQUFBVSxPQUFBVCxNQUVBLElBQUFVLEdBQUEsSUFFQVQsR0FBQVUsVUFBQVAsR0FBQSxRQUFBLGVBQUEsV0FDQU0sR0FBQUUsYUFBQUYsRUFDQSxJQUFBRyxHQUFBWixFQUFBSyxNQUFBUSxLQUFBLFFBQ0FDLEVBQUFkLEVBQUEsS0FBQVksR0FBQSxLQUFBQSxFQUFBLE9BQUFBLEVBUUEsT0FQQWQsUUFBQWlCLE9BQUFDLGVBQ0FsQixPQUFBaUIsT0FBQUUsY0FDQVIsRUFBQVMsV0FBQSxXQUNBLEdBQUFDLEdBQUFMLEVBQUFNLFNBQUFDLEdBQ0FDLFNBQUFDLElBQUFKLEdBQ0FuQixFQUFBLGFBQUF3QixTQUFBQyxVQUFBTixHQUFBLElBQUFuQixFQUFBMEIsS0FBQSxHQUFBLEVBQUEsR0FBQSxNQUNBLE1BQ0EsS0FLQXRCLE9BQUEsV0FDQU4sT0FBQTZCLE1BQUE1QixPQUNBRCxPQUFB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LEVBQUEsUUFJQStELFFBQUEsV0FDQTNGLEVBQUEsUUFBQXFFLFlBQUEsWUFDQXJFLEVBQUEsYUFBQXlCLFVBQUEzQixPQUFBMEYsVUFBQUMsZUNqQkEzRixPQUFBNkIsT0FFQTVCLEtBQUEsV0FTQUQsT0FBQTZCLE1BQUExQixPQUNBRCxFQUFBLGFBQUEyQixPQUNBaUUsVUFBQSxFQUNBQyxNQUFBLEVBQ0FDLGFBQUEsRUFDQUMsWUFBQSxFQUVBQyxVQUFBLEdBQ0FDLFVBQUEsR0FDQUMsZUFBQSxFQUNBQyxVQUFBLEVBQ0FDLGNBQUEsT0FJQW5HLEtBQUEsY0MxQkFILE9BQUFVLFFBRUEyQixLQUFBLEtBRUFwQyxLQUFBLFdBQ0FELE9BQUFVLE9BQUEyQixLQUFBckMsT0FBQW1DLGVBQUFDLElBQUFsQyxFQUFBRSxRQUFBNkIsU0FFQS9CLEVBQUEsY0FBQXFHLGtCQUNBLE9BQUF2RyxPQUFBVSxPQUFBMkIsS0FDQW5DLEVBQUEsK0JBQUFxRyxrQkFFQXJHLEVBQUEseUJBQUFxRyxtQkFJQXJFLE9BQUEsU0FBQUYsR0FDQSxHQUFBd0UsR0FBQXhHLE9BQUFtQyxlQUFBQyxJQUFBSixFQUNBaEMsUUFBQVUsT0FBQTJCLE9BQUFtRSxJQUlBdEcsRUFBQSxjQUFBdUcsUUFBQSxxQkFDQSxPQUFBekcsT0FBQVUsT0FBQTJCLEtBQ0FuQyxFQUFBLCtCQUFBdUcsUUFBQSxxQkFFQXZHLEVBQUEseUJBQUF1RyxRQUFBLHFCQUVBekcsT0FBQVUsT0FBQTJCLEtBQUFtRSxFQUdBdEcsRUFBQSxjQUFBcUcsa0JBQ0EsT0FBQXZHLE9BQUFVLE9BQUEyQixLQUNBbkMsRUFBQSwrQkFBQXFHLGtCQUVBckcsRUFBQSx5QkFBQXFHIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBVUExJTksgPSB7fTtcblxuVVBMSU5LID0ge1xuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAkKGZ1bmN0aW9uKCkge1xuICAgICAgVVBMSU5LLmJpbmQoKTtcbiAgICB9KTtcbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbigpIHtcbiAgICAkKHdpbmRvdylcbiAgICAub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIFVQTElOSy5vbmxvYWQoKTtcbiAgICAgICQodGhpcylcbiAgICAgIC5vbignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIFVQTElOSy5vbnNjcm9sbCgpO1xuICAgICAgfSlcbiAgICAgIC5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIFVQTElOSy5vbnJlc2l6ZSgpO1xuICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG4gICAgVVBMSU5LLnN0aWNreS5pbml0KCk7XG5cbiAgICB2YXIgdGltZXIgPSBudWxsO1xuICAgIC8vIHNtb290aCBzY3JvbGxcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnYVtocmVmXj1cIiNcIl0nLCBmdW5jdGlvbigpe1xuICAgICAgaWYodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB2YXIgaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgdmFyIHRhcmdldCA9ICQoaHJlZiA9PSAnIycgfHwgaHJlZiA9PT0gJycgPyAnaHRtbCcgOiBocmVmKTtcbiAgICAgIFVQTElOSy5oZWFkZXIuY2xvc2VNYWluTmF2KCk7XG4gICAgICBVUExJTksuaGVhZGVyLmNsb3NlU3ViTmF2KCk7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHRhcmdldC5vZmZzZXQoKS50b3A7XG4gICAgICAgIGNvbnNvbGUubG9nKHBvc2l0aW9uKTtcbiAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wIDogcG9zaXRpb259LCAzMDAsICQuYmV6KFsuOCwgMCwgLjMsIDFdKSk7XG4gICAgICB9LCAzMDApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgb25sb2FkOiBmdW5jdGlvbigpIHtcbiAgICBVUExJTksuc2xpY2suaW5pdCgpO1xuICAgIFVQTElOSy5oZWFkZXIuaW5pdCgpO1xuICB9LFxuXG4gIG9uc2Nyb2xsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3QgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgVVBMSU5LLmhlYWRlci5zY3JvbGwoc3QpO1xuICB9LFxuXG4gIG9ucmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgd3cgPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgICBVUExJTksuaGVhZGVyLnJlc2l6ZSh3dyk7XG4gICAgVVBMSU5LLnN0aWNreS5yZXNpemUod3cpO1xuICB9XG5cblxufTtcblxuVVBMSU5LLmluaXQoKTtcbiIsIlVQTElOSy5nZXREaXNwbGF5VHlwZSA9IHtcblxuICBnZXQ6IGZ1bmN0aW9uKHd3KSB7XG4gICAgdmFyIHR5cGUgPSBudWxsO1xuICAgIGlmKHd3IDw9IDc2Nykge1xuICAgICAgdHlwZSA9ICdzcCc7XG4gICAgfSBlbHNlIGlmKDc2OCA8PSB3dyAmJiB3dyA8PSAxMDI0KSB7XG4gICAgICB0eXBlID0gJ3RiJztcbiAgICB9IGVsc2UgaWYoMTAyNSA8IHd3KSB7XG4gICAgICB0eXBlID0gICdwYyc7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdkaXNwbGF5IHNpemUgaXMgJyt0eXBlKTtcbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG59O1xuIiwiVVBMSU5LLmhlYWRlciA9IHtcblxuICAkZWw6IG51bGwsXG4gICRtYWluOiBudWxsLFxuICAkc3ViOiBudWxsLFxuICAkbWFpbkNsb25lOiBudWxsLFxuICAkc3ViQ2xvbmU6IG51bGwsXG5cbiAgc2xfbWFpbk5hdlRyaWdnZXI6IG51bGwsXG4gIHNsX3N1Yk5hdlRyaWdnZXI6IG51bGwsXG5cbiAgbWFpbl9oZWlnaHQ6IG51bGwsXG4gIHN1Yl9oZWlnaHQ6IG51bGwsXG5cbiAgX3N0OiAwLFxuXG4gIGlzU2Nyb2xsOiBmYWxzZSxcblxuICBpc0Zyb250UGFnZTogZmFsc2UsXG4gIGlzMm5kUGFnZTogZmFsc2UsXG4gIGlzM3JkUGFnZTogZmFsc2UsXG5cbiAgaXNQQzogZmFsc2UsXG4gIGlzVEI6IGZhbHNlLFxuICBpc1NQOiBmYWxzZSxcblxuICBkZWZNYWluT3BlbjogZmFsc2UsXG4gIGRlZlN1Yk9wZW46IGZhbHNlLFxuXG4gIGlzTWFpbk5hdk9wZW46IGZhbHNlLFxuICBpc1N1Yk5hdk9wZW46IGZhbHNlLFxuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIFVQTElOSy5oZWFkZXIuJGVsID0gJCgnLmpzLWhlYWRlcldyYXAnKTtcbiAgICBVUExJTksuaGVhZGVyLiRtYWluID0gJCgnLmwtbmF2Jyk7XG4gICAgVVBMSU5LLmhlYWRlci4kc3ViID0gJCgnLmwtaGVhZGVyX3N1YicpO1xuXG4gICAgVVBMSU5LLmhlYWRlci5zbF9tYWluTmF2VHJpZ2dlciA9ICcuanMtbWFpbk5hdlRyaWdnZXInO1xuICAgIFVQTElOSy5oZWFkZXIuc2xfc3ViTmF2VHJpZ2dlciA9ICcuanMtc3ViTmF2VHJpZ2dlcic7XG5cbiAgICBVUExJTksuaGVhZGVyLmlzRnJvbnRQYWdlID0gJCgnLnR5cGUtZnJvbnRwYWdlJykubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuICAgIFVQTElOSy5oZWFkZXIuaXMybmRQYWdlID0gJCgnLnR5cGUtMm5kJykubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuICAgIFVQTElOSy5oZWFkZXIuaXMzcmRQYWdlID0gJCgnLnR5cGUtM3JkJykubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgLy8g44Oh44Kk44Oz44OK44OT44KS44Kv44Ot44O844OzXG4gICAgVVBMSU5LLmhlYWRlci4kbWFpbkNsb25lID0gVVBMSU5LLmhlYWRlci4kbWFpbi5jbG9uZSgpO1xuICAgIFVQTElOSy5oZWFkZXIuJG1haW5DbG9uZS5hZGRDbGFzcygnaXMtY2xvbmUnKTtcbiAgICAkKCdib2R5JykuYXBwZW5kKFVQTElOSy5oZWFkZXIuJG1haW5DbG9uZSk7XG4gICAgJCgnLmwtbmF2LmlzLWNsb25lJykud3JhcCgnPGRpdiBjbGFzcz1cImpzLW1haW4tY2xvbmVcIj48L2Rpdj4nKTtcblxuICAgIC8vIOOCteODluODiuODk+OCkuOCr+ODreODvOODs1xuICAgIFVQTElOSy5oZWFkZXIuJHN1YkNsb25lID0gVVBMSU5LLmhlYWRlci4kc3ViLmNsb25lKCk7XG4gICAgVVBMSU5LLmhlYWRlci4kc3ViQ2xvbmUuYWRkQ2xhc3MoJ2lzLWNsb25lJyk7XG4gICAgJCgnYm9keScpLmFwcGVuZChVUExJTksuaGVhZGVyLiRzdWJDbG9uZSk7XG4gICAgJCgnLmwtaGVhZGVyX3N1Yi5pcy1jbG9uZScpLndyYXAoJzxkaXYgY2xhc3M9XCJqcy1zdWItY2xvbmVcIj48L2Rpdj4nKTtcblxuICAgIFVQTElOSy5oZWFkZXIucmVzaXplKCQod2luZG93KS53aWR0aCgpKTtcbiAgICBVUExJTksuaGVhZGVyLnNjcm9sbCgwKTtcblxuICAgIFVQTElOSy5oZWFkZXIuYmluZCgpO1xuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uKCkge1xuICAgICQoZG9jdW1lbnQpXG4gICAgLm9uKCdjbGljaycsIFVQTElOSy5oZWFkZXIuc2xfbWFpbk5hdlRyaWdnZXIsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYoVVBMSU5LLmhlYWRlci5pc01haW5OYXZPcGVuKSB7XG4gICAgICAgIFVQTElOSy5oZWFkZXIuY2xvc2VNYWluTmF2KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBVUExJTksuaGVhZGVyLm9wZW5NYWluTmF2KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSlcbiAgICAub24oJ2NsaWNrJywgVVBMSU5LLmhlYWRlci5zbF9zdWJOYXZUcmlnZ2VyLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmKFVQTElOSy5oZWFkZXIuaXNTdWJOYXZPcGVuKSB7XG4gICAgICAgIFVQTElOSy5oZWFkZXIuY2xvc2VTdWJOYXYoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFVQTElOSy5oZWFkZXIub3BlblN1Yk5hdigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9LFxuXG4gIHNldFNpemU6IGZ1bmN0aW9uKHd3KSB7XG4gICAgVVBMSU5LLmhlYWRlci5pc1BDID0gZmFsc2U7XG4gICAgVVBMSU5LLmhlYWRlci5pc1RCID0gZmFsc2U7XG4gICAgVVBMSU5LLmhlYWRlci5pc1NQID0gZmFsc2U7XG5cbiAgICB2YXIgdHlwZSA9IFVQTElOSy5nZXREaXNwbGF5VHlwZS5nZXQod3cpO1xuICAgIGlmKHR5cGUgPT0gJ3NwJykgVVBMSU5LLmhlYWRlci5pc1NQID0gdHJ1ZTtcbiAgICBpZih0eXBlID09ICd0YicpIFVQTElOSy5oZWFkZXIuaXNUQiA9IHRydWU7XG4gICAgaWYodHlwZSA9PSAncGMnKSBVUExJTksuaGVhZGVyLmlzUEMgPSB0cnVlO1xuICB9LFxuXG4gIHNldERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgIFVQTElOSy5oZWFkZXIuZGVmTWFpbk9wZW4gPSBmYWxzZTtcbiAgICBVUExJTksuaGVhZGVyLmRlZlN1Yk9wZW4gPSBmYWxzZTtcblxuICAgIGlmKFVQTElOSy5oZWFkZXIuaXNGcm9udFBhZ2UpIHtcbiAgICAgIFVQTElOSy5oZWFkZXIuZGVmTWFpbk9wZW4gPSB0cnVlO1xuXG4gICAgfSBlbHNlIGlmKFVQTElOSy5oZWFkZXIuaXMybmRQYWdlKSB7XG4gICAgICBpZihVUExJTksuaGVhZGVyLmlzVEIpIHtcbiAgICAgICAgVVBMSU5LLmhlYWRlci5kZWZTdWJPcGVuID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZihVUExJTksuaGVhZGVyLmlzUEMpIHtcbiAgICAgICAgVVBMSU5LLmhlYWRlci5kZWZNYWluT3BlbiA9IHRydWU7XG4gICAgICAgIFVQTElOSy5oZWFkZXIuZGVmU3ViT3BlbiA9IHRydWU7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYoVVBMSU5LLmhlYWRlci5pczNyZFBhZ2UpIHtcbiAgICAgIGlmKFVQTElOSy5oZWFkZXIuaXNQQykge1xuICAgICAgICBVUExJTksuaGVhZGVyLmRlZk1haW5PcGVuID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgZG9Jbml0OiBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnZG9pbml0Jyk7XG4gICAgaWYoVVBMSU5LLmhlYWRlci5pc0Zyb250UGFnZSkgY29uc29sZS5sb2coJ+OAgGlzRnJvbnRQYWdlJyk7XG4gICAgaWYoVVBMSU5LLmhlYWRlci5pczJuZFBhZ2UpIGNvbnNvbGUubG9nKCfjgIBpczJuZFBhZ2UnKTtcbiAgICBpZihVUExJTksuaGVhZGVyLmlzM3JkUGFnZSkgY29uc29sZS5sb2coJ+OAgGlzM3JkUGFnZScpO1xuICAgIGlmKFVQTElOSy5oZWFkZXIuaXNQQykgY29uc29sZS5sb2coJ+OAgGlzUEMnKTtcbiAgICBpZihVUExJTksuaGVhZGVyLmlzVEIpIGNvbnNvbGUubG9nKCfjgIBpc1RCJyk7XG4gICAgaWYoVVBMSU5LLmhlYWRlci5pc1NQKSBjb25zb2xlLmxvZygn44CAaXNTUCcpO1xuICAgIGlmKFVQTElOSy5oZWFkZXIuZGVmTWFpbk9wZW4pIGNvbnNvbGUubG9nKCfjgIBkZWZNYWluT3BlbicpO1xuICAgIGlmKFVQTElOSy5oZWFkZXIuZGVmU3ViT3BlbikgY29uc29sZS5sb2coJ+OAgGRlZlN1Yk9wZW4nKTtcbiAgICBjb25zb2xlLmxvZygnLSAtIC0gLSAtIC0gLSAtIC0gLScpO1xuXG4gICAgaWYoVVBMSU5LLmhlYWRlci5kZWZNYWluT3Blbikge1xuICAgICAgVVBMSU5LLmhlYWRlci5vcGVuTWFpbk5hdigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBVUExJTksuaGVhZGVyLmNsb3NlTWFpbk5hdigpO1xuICAgIH1cbiAgICBpZihVUExJTksuaGVhZGVyLmRlZlN1Yk9wZW4pIHtcbiAgICAgIFVQTElOSy5oZWFkZXIub3BlblN1Yk5hdigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBVUExJTksuaGVhZGVyLmNsb3NlU3ViTmF2KCk7XG4gICAgfVxuICB9LFxuXG4gIHJlc2l6ZTogZnVuY3Rpb24od3cpIHtcbiAgICBVUExJTksuaGVhZGVyLm1haW5faGVpZ2h0ID0gVVBMSU5LLmhlYWRlci4kbWFpbkNsb25lLm91dGVySGVpZ2h0KCk7XG4gICAgVVBMSU5LLmhlYWRlci5zdWJfaGVpZ2h0ID0gVVBMSU5LLmhlYWRlci4kc3ViQ2xvbmUuaGVpZ2h0KCk7XG4gICAgVVBMSU5LLmhlYWRlci5zZXRTaXplKHd3KTtcbiAgICBVUExJTksuaGVhZGVyLnNldERlZmF1bHQoKTtcbiAgICBVUExJTksuaGVhZGVyLnNjcm9sbChVUExJTksuaGVhZGVyLl9zdCk7XG4gIH0sXG5cbiAgc2Nyb2xsOiBmdW5jdGlvbihzdCkge1xuICAgIGlmKHN0ID4gMzAwKSB7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2lzLXNjcm9sbCcpO1xuICAgICAgVVBMSU5LLmhlYWRlci5pc1Njcm9sbCA9IHRydWU7XG4gICAgICBpZihVUExJTksuaGVhZGVyLmlzTWFpbk5hdk9wZW4pIFVQTElOSy5oZWFkZXIuY2xvc2VNYWluTmF2KCk7XG4gICAgICBpZihVUExJTksuaGVhZGVyLmlzU3ViTmF2T3BlbikgVVBMSU5LLmhlYWRlci5jbG9zZVN1Yk5hdigpO1xuICAgICAgaWYoc3QgPCBVUExJTksuaGVhZGVyLl9zdCApIHtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdpcy1uYXZmaXhlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdpcy1uYXZmaXhlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBVUExJTksuaGVhZGVyLmlzU2Nyb2xsID0gZmFsc2U7XG4gICAgICAkKCdib2R5JylcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdpcy1zY3JvbGwnKVxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2lzLW5hdmZpeGVkJyk7XG4gICAgICBVUExJTksuaGVhZGVyLmRvSW5pdCgpOyAvLyDjgrnjgq/jg63jg7zjg6sw44Gu6ZaL44GN5pa544Gr5oi744GZXG4gICAgfVxuXG4gICAgaWYoc3QgPiA0MDApIHtcbiAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2lzLXN1Yk5hdlRyaWdnZXJGaXgnKTtcbiAgICAgIH0sMTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdpcy1zdWJOYXZUcmlnZ2VyRml4Jyk7XG4gICAgfVxuXG4gICAgVVBMSU5LLmhlYWRlci5fc3QgPSBzdDtcbiAgfSxcblxuICBvcGVuTWFpbk5hdjogZnVuY3Rpb24oKSB7XG4gICAgVVBMSU5LLmhlYWRlci5pc01haW5OYXZPcGVuID0gdHJ1ZTtcbiAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ21haW4tb3BlbicpO1xuICAgIGlmKCFVUExJTksuaGVhZGVyLmlzU2Nyb2xsKSB7XG4gICAgICBVUExJTksuaGVhZGVyLiRlbC5jc3Moe1xuICAgICAgICAnbWFyZ2luLXRvcCc6ICcwcHgnXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgVVBMSU5LLmhlYWRlci5zaHVmZmxlRmFkZWluKCcubC1uYXYuaXMtY2xvbmUnKTtcbiAgICB9XG4gIH0sXG5cbiAgY2xvc2VNYWluTmF2OiBmdW5jdGlvbigpIHtcbiAgICBVUExJTksuaGVhZGVyLmlzTWFpbk5hdk9wZW4gPSBmYWxzZTtcbiAgICBVUExJTksuaGVhZGVyLm9wYWNpdHkwKCcubC1uYXYuaXMtY2xvbmUnKTtcbiAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21haW4tb3BlbicpO1xuICAgIGlmKCFVUExJTksuaGVhZGVyLmlzU2Nyb2xsKSB7XG4gICAgICBVUExJTksuaGVhZGVyLiRlbC5jc3Moe1xuICAgICAgICAnbWFyZ2luLXRvcCc6IC0gVVBMSU5LLmhlYWRlci5tYWluX2hlaWdodCArICdweCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBvcGVuU3ViTmF2OiBmdW5jdGlvbigpIHtcbiAgICBpZihVUExJTksuaGVhZGVyLiRzdWIubGVuZ3RoKSB7XG4gICAgICBVUExJTksuaGVhZGVyLmlzU3ViTmF2T3BlbiA9IHRydWU7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3N1Yi1vcGVuJyk7XG4gICAgICBpZighVVBMSU5LLmhlYWRlci5pc1Njcm9sbCkge1xuICAgICAgICBVUExJTksuaGVhZGVyLiRzdWIuY3NzKHtcbiAgICAgICAgICAnaGVpZ2h0JzogVVBMSU5LLmhlYWRlci5zdWJfaGVpZ2h0ICsgJ3B4J1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFVQTElOSy5oZWFkZXIuc2h1ZmZsZUZhZGVpbignLmlzLWNsb25lIC5sLW5hdl9zdWInKTtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdpcy1uYXZmaXhlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBjbG9zZVN1Yk5hdjogZnVuY3Rpb24oKSB7XG4gICAgaWYoVVBMSU5LLmhlYWRlci4kc3ViLmxlbmd0aCkge1xuICAgICAgVVBMSU5LLmhlYWRlci5pc1N1Yk5hdk9wZW4gPSBmYWxzZTtcbiAgICAgIFVQTElOSy5oZWFkZXIub3BhY2l0eTAoJy5pcy1jbG9uZSAubC1uYXZfc3ViJyk7XG4gICAgICBpZighVVBMSU5LLmhlYWRlci5pc1Njcm9sbCkge1xuICAgICAgICBVUExJTksuaGVhZGVyLiRzdWIuY3NzKHtcbiAgICAgICAgICAnaGVpZ2h0JzogMTAwKydweCdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnaXMtbmF2Zml4ZWQnKTtcbiAgICAgIH1cbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc3ViLW9wZW4nKTtcbiAgICB9XG4gIH0sXG5cbiAgc2h1ZmZsZUZhZGVpbjogZnVuY3Rpb24oc2wpIHtcbiAgICAvLyBUT0RPIOOCguOBo+OBqOewoeaYk+WMluOBp+OBjeOBneOBhlxuICAgIHZhciBzaHVmZmxlID0gZnVuY3Rpb24oKSB7cmV0dXJuIE1hdGgucmFuZG9tKCktLjV9O1xuICAgIHZhciBjb250ZW50ID0gJChzbCkuZXEoMCkuZmluZCgnYSwgLmZvcm0tZ29vZ2xlc2VhcmNoLXRleHQsIC5mb3JtLWdvb2dsZXNlYXJjaCcpO1xuICAgIHZhciB0b3RhbCA9IGNvbnRlbnQubGVuZ3RoO1xuICAgIHZhciBkZWxheSA9IG5ldyBBcnJheSgpO1xuICAgIHZhciBpID0gMDtcbiAgICBjb250ZW50LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBkZWxheVtpXSA9IDUwMCArIGkgKiAzMDtcbiAgICAgIGkrKztcbiAgICB9KTtcbiAgICBkZWxheSA9IGRlbGF5LnNvcnQoc2h1ZmZsZSk7XG4gICAgY29uc29sZS5sb2coZGVsYXkpO1xuXG4gICAgdmFyIGogPSAwO1xuICAgIGNvbnRlbnQuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRlbGF5W2pdKTtcbiAgICAgIGNvbnRlbnQuZXEoaikuZGVsYXkoZGVsYXlbal0pLmFuaW1hdGUoeydvcGFjaXR5JzogMX0sMzApO1xuICAgICAgaisrO1xuICAgIH0pO1xuICB9LFxuXG4gIG9wYWNpdHkwOiBmdW5jdGlvbihzbCkge1xuICAgIC8vIFRPRE8g44KC44Gj44Go57Ch5piT5YyW44Gn44GN44Gd44GGXG4gICAgdmFyIGNvbnRlbnQgPSAkKHNsKS5lcSgwKS5maW5kKCdhLCAuZm9ybS1nb29nbGVzZWFyY2gtdGV4dCwgLmZvcm0tZ29vZ2xlc2VhcmNoJyk7XG4gICAgY29udGVudC5jc3MoeydvcGFjaXR5JzogMH0pO1xuICB9LFxuXG5cblxufSIsIlVQTElOSy5zY3JvbGxCYW4gPSB7XG5cbiAgX2N1cnJlbnRQb3M6IDAsXG5cbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgYmFuOiBmdW5jdGlvbihzdCkge1xuICAgIFVQTElOSy5zY3JvbGxCYW4uX2N1cnJlbnRQb3MgPSBzdDtcbiAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgJCgnYm9keScpLmNzcyh7XG4gICAgICB0b3A6ICctJyArIHN0ICsgJ3B4J1xuICAgIH0pO1xuICB9LFxuXG4gIHJlbGVhc2U6IGZ1bmN0aW9uKCl7XG4gICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdpcy1maXhlZCcpO1xuICAgICQoJ2h0bWwsYm9keScpLnNjcm9sbFRvcChVUExJTksuc2Nyb2xsQmFuLl9jdXJyZW50UG9zKTtcbiAgfVxuXG59O1xuIiwiVVBMSU5LLnNsaWNrID0ge1xuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gY29uc29sZS5sb2coJ2FhYScpO1xuICAgIC8vIHZhciB3dyA9ICQod2luZG93KS5vdXRlcldpZHRoKCk7XG4gICAgLy8gdmFyIHNsaWRlVyA9ICggd3cgKiAwLjg3NSApIC0gMzAgLSA4O1xuICAgIC8vIGlmKCBzbGlkZVcgPj0gMTI4MCApIHNsaWRlVyA9IDEyODA7XG4gICAgLy8gdmFyIHBhZGRpbmcgPSAoIHd3IC0gc2xpZGVXICkgLyAyO1xuXG5cbiAgICBVUExJTksuc2xpY2suYmluZCgpO1xuICAgICQoJy5qcy1zbGljaycpLnNsaWNrKHtcbiAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgZG90czogdHJ1ZSxcbiAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgIGNlbnRlck1vZGU6IHRydWUsIC8v6KaB57Sg44KS5Lit5aSu5a+E44GbXG4gICAgICAvLyBjZW50ZXJQYWRkaW5nOiBwYWRkaW5nICsgJ3B4JywgLy/kuKHjgrXjgqTjg4njga7opovjgYjjgabjgYTjgovpg6jliIbjga7jgrXjgqTjgrpcbiAgICAgIHByZXZBcnJvdzogJycsXG4gICAgICBuZXh0QXJyb3c6ICcnLFxuICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgICAgYXV0b3BsYXlTcGVlZDogNDAwMCxcbiAgICB9KTtcbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbigpIHtcbiAgfVxuXG59O1xuIiwiVVBMSU5LLnN0aWNreSA9IHtcblxuICB0eXBlOiBudWxsLFxuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIFVQTElOSy5zdGlja3kudHlwZSA9IFVQTElOSy5nZXREaXNwbGF5VHlwZS5nZXQoJCh3aW5kb3cpLndpZHRoKCkpO1xuXG4gICAgJCgnLmpzLXN0aWNreScpLnN0aWNrX2luX3BhcmVudCgpOyAvLyDmsY7nlKhcbiAgICBpZihVUExJTksuc3RpY2t5LnR5cGUgPT09ICdwYycpIHtcbiAgICAgICQoJy5saXN0LWNhbGVuZGFyLWhlYWRlci1pbm5lcicpLnN0aWNrX2luX3BhcmVudCgpOyAvLyDjgqvjg6zjg7Pjg4Djg7x0Yi9wY1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcubGlzdC1jYWxlbmRhci1oZWFkZXInKS5zdGlja19pbl9wYXJlbnQoKTsgLy8g44Kr44Os44Oz44OA44O8c3BcbiAgICB9XG4gIH0sXG5cbiAgcmVzaXplOiBmdW5jdGlvbih3dykge1xuICAgIHZhciBfdHlwZSA9IFVQTElOSy5nZXREaXNwbGF5VHlwZS5nZXQod3cpO1xuICAgIGlmKFVQTElOSy5zdGlja3kudHlwZSAhPT0gX3R5cGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGFuZ2Ugc3RpY2t5LXR5cGUnKTtcblxuICAgICAgLy8g44K544OG44Kj44OD44Kt44O844Gu6Kej6ZmkXG4gICAgICAkKCcuanMtc3RpY2t5JykudHJpZ2dlcignc3RpY2t5X2tpdDpkZXRhY2gnKTsgLy8g5rGO55SoXG4gICAgICBpZihVUExJTksuc3RpY2t5LnR5cGUgPT09ICdwYycpIHtcbiAgICAgICAgJCgnLmxpc3QtY2FsZW5kYXItaGVhZGVyLWlubmVyJykudHJpZ2dlcihcInN0aWNreV9raXQ6ZGV0YWNoXCIpOyAvLyDjgqvjg6zjg7Pjg4Djg7x0Yi9wY1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCgnLmxpc3QtY2FsZW5kYXItaGVhZGVyJykudHJpZ2dlcihcInN0aWNreV9raXQ6ZGV0YWNoXCIpOyAvLyDjgqvjg6zjg7Pjg4Djg7xzcFxuICAgICAgfVxuICAgICAgVVBMSU5LLnN0aWNreS50eXBlID0gX3R5cGU7XG5cbiAgICAgIC8vIOOCueODhuOCo+ODg+OCreODvOWGjeioreWumlxuICAgICAgJCgnLmpzLXN0aWNreScpLnN0aWNrX2luX3BhcmVudCgpOyAvLyDmsY7nlKhcbiAgICAgIGlmKFVQTElOSy5zdGlja3kudHlwZSA9PT0gJ3BjJykge1xuICAgICAgICAkKCcubGlzdC1jYWxlbmRhci1oZWFkZXItaW5uZXInKS5zdGlja19pbl9wYXJlbnQoKTsgLy8g44Kr44Os44Oz44OA44O8dGIvcGNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy5saXN0LWNhbGVuZGFyLWhlYWRlcicpLnN0aWNrX2luX3BhcmVudCgpOyAvLyDjgqvjg6zjg7Pjg4Djg7xzcFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuIl19
